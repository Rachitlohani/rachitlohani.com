---
import BaseLayout from "../layouts/BaseLayout.astro";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import { mediaItems } from "../data/media";

const title = "Media â€” Rachit Lohani";
const description = "Interviews, talks, and media appearances.";
---
<BaseLayout title={title} description={description}>
  <div class="page">
    <Nav />
    <main class="content">
      <header class="content-header">
        <p class="eyebrow">Media</p>
        <h1>Interviews and conversations.</h1>
        <p class="lead">A place for talks, interviews, and appearances.</p>
      </header>

      <section class="content-block">
        {mediaItems.length === 0 ? (
          <div class="empty-state">
            <p>Add your YouTube or podcast interviews here.</p>
          </div>
        ) : (
          <div class="media-grid">
            {mediaItems.map((item) => {
              const url = new URL(item.url);
              const id = url.searchParams.get("v") ?? "";
              return (
                <div class="media-card">
                  <div class="media-embed">
                    <iframe
                      loading="lazy"
                      src={`https://www.youtube.com/embed/${id}`}
                      title={item.title}
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowfullscreen
                    />
                  </div>
                  <div class="media-meta">
                    <h2>{item.title}</h2>
                    <a class="text-link" href={item.url} rel="noopener noreferrer">Watch on YouTube</a>
                  </div>
                </div>
              );
            })}
          </div>
        )}
      </section>
    </main>
    <Footer />
  </div>
</BaseLayout>
